BEGIN TRANSACTION;
DROP TABLE IF EXISTS move;
DROP TABLE IF EXISTS game;
DROP TABLE IF EXISTS outcome;
DROP TABLE IF EXISTS player;
CREATE TABLE player(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, piece TEXT NOT NULL);
INSERT INTO "player" VALUES(1,'Naught');
INSERT INTO "player" VALUES(2,'Cross');
CREATE TABLE outcome(id INTEGER PRIMARY KEY AUTOINCREMENT, description TEXT NOT NULL);
INSERT INTO "outcome" VALUES(1,'In progress');
INSERT INTO "outcome" VALUES(2,'Naught won');
INSERT INTO "outcome" VALUES(3,'Cross won');
INSERT INTO "outcome" VALUES(4,'Draw');
CREATE TABLE game(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, outcomeid INTEGER NOT NULL, FOREIGN KEY(outcomeid) REFERENCES outcome(id));
CREATE TABLE move(gameid INTEGER NOT NULL, playerid INTEGER NOT NULL, movenum INTEGER NOT NULL, x INTEGER NOT NULL, y INTEGER NOT NULL, FOREIGN KEY(gameid) REFERENCES game(id), FOREIGN KEY(playerid) REFERENCES player(id));
COMMIT;
